<div ng-controller="DevGroupCtrl">
    <!--左侧设备组展示视图-->
    <div class="LeftView">
        <div class="DGTitle">
            <span style="font-size:30px">设备组</span>
            <button style="margin-left:5px" class="btn btn-primary btn-sm" data-toggle="modal"
                    data-target="#addDeviceGroup">+ 创建设备组
            </button>
            <div class="SearchDG">
                <span>搜索：<input type="text" style="width: 130px" placeholder="输入设备组名称"
                                ng-model="$parent.dgname"/></span>
                <span class="Searchicon" ng-click="searchDG()" title="搜索">
                    <i class="fa fa-search fa-lg shand" aria-hidden="true"></i>
                </span>
            </div>

        </div>
        <div class="DGContainer">
            <div ng-repeat="DG in DeviceGroups" ng-show="showAll">
                <div class="chooseBtn" ng-click="show(DG)">
                    <div>
                        <i class="fa fa-sitemap fa-2x "></i>
                        <p>{{DG.name}}</p>
                    </div>
                </div>
            </div>

            <!--搜索展示视图-->
            <div ng-repeat="result in Searchresults" ng-show="showInfo">
                <div class="chooseBtn" ng-click="show(result)">
                    <div>
                        <i class="fa fa-sitemap fa-2x "></i>
                        <p>{{result.name}}</p>
                    </div>
                </div>
            </div>
        </div>

        <!--modal添加设备组-->
        <div class="modal fade" id="addDeviceGroup" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
             aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                            &times;
                        </button>
                        <h4 class="modal-title">
                            添加设备组
                        </h4>
                    </div>
                    <div class="modal-body">
                        <p>设备组名：<input type="text" style="pixels: 300px" placeholder="LIANG"
                                       ng-model="$parent.addDGName"></p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">关闭
                        </button>
                        <button type="button" class="btn btn-primary" ng-click="addDG()">
                            确定
                        </button>
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal -->
        </div>
    </div>
    <!--右侧关联设备视图-->
    <div class="RightView">
        <div class="DGAssignContainer">
            <div class="DGTitle DGminTitle">
                <span class="RightviewTitle">设备组信息</span>
                <div class="ruleiconcontainer" data-toggle="modal" data-target="#delDG">
                    <i class="fa fa-trash-o fa-lg ruleicon shand" title="删除"></i>
                </div>
            </div>
            <div class="item">
                <p>
                    设备组名：{{item.name}}
                    <!--i class="fa fa-pencil-square-o iedit shand" data-toggle="modal"
                       data-target="#editDGName" title="编辑设备组名"></i>
                    </p.time}}--></p>
                <p>设备组ID：{{item.id}}</p>
            </div>
        </div>


        <div class="DGAssignContainer">
            <div class="DGTitle DGminTitle">
                <span class="RightviewTitle">关联设备列表</span>
            </div>
            <!--关联设备显示-->
            <!--ui-grid实现
            <div class="item">
                <div class="gridStyle DGgridStyle" ui-grid="gridOptions"></div>
            </div> -->

            <!--纯angular实现-->
            <div class="item">
                <table class="table table-bordered table-hover table-striped" ng-show="!showEmpty">
                    <thead>
                    <tr>
                        <td style="width: 30px"></td>
                        <td>设备名</td>
                        <td>设备ID</td>
                        <td>移除</td>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat-start="data in myData">
                        <td>
                            <button class="btn btn-xs" ng-if="data.expanded" ng-click="data.expanded=false">-</button>
                            <button class="btn btn-xs" ng-if="!data.expanded" ng-click="data.expanded=true">+</button>
                        </td>
                        <td>{{data.name}}</td>
                        <td>{{data.id}}</td>
                        <td><i class="fa fa-minus shand" data-toggle="modal" data-target="#warnDelAssign" ng-click="giveData(data)"></i></td>
                    </tr>
                    <tr ng-if="data.expanded" ng-repeat-end="">
                        <td></td>
                        <td colspan="3">
                            <p>设备名：{{data.name}}</p>
                            <p>设备ID：{{data.id}}</p>
                            <p>父类设备：{{data.parentDeviceId}}</p>
                            <p>
                                <button class="btn btn-primary" data-toggle="modal"
                                        data-target="#refreshDevice" ng-click="setValue(data)">更新设备</button>
                                <button class="btn btn-primary" data-toggle="modal"
                                        data-target="#token" ng-click="showToken(data)">查看令牌</button>
                            </p>
                        </td>
                    </tr>
                    </tbody>
                </table>
                <div ng-show="showEmpty" id="deviceGroupEmpty">当前设备组下无关联设备</div>
            </div>
        </div>
        <!--modal从设备组中取消关联设备-->
        <div class="modal fade" id="warnDelAssign" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
             aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                            &times;
                        </button>
                        <h4 class="modal-title" id="myModalLabel">
                            取消关联
                        </h4>
                    </div>
                    <div class="modal-body">
                        从设备组中除去此设备？
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">关闭
                        </button>
                        <button type="button" class="btn btn-primary" ng-click="unAssign()">
                            确定
                        </button>
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal -->
        </div>

        <!--modal删除设备组-->
        <div class="modal fade" id="delDG" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
             aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                            &times;
                        </button>
                        <h4 class="modal-title" id="myModalLabel">
                            删除设备组
                        </h4>
                    </div>
                    <div class="modal-body">
                        确定删除此设备组？
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">取消
                        </button>
                        <button type="button" class="btn btn-primary" ng-click="delDG()">
                            确定
                        </button>
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal -->
        </div>

        <!--modal编辑设备组名-->
        <div class="modal fade" id="editDGName" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
             aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                            &times;
                        </button>
                        <h4 class="modal-title">
                            编辑设备组
                        </h4>
                    </div>
                    <div class="modal-body">
                        <p>设备组名：<input type="text" name="NewDGName" placeholder={{item.name}}
                                       ng-model="$parent.editdg"></input>
                        </p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">关闭
                        </button>
                        <button type="button" class="btn btn-primary" ng-click="editDGName()">
                            确定
                        </button>
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal -->
        </div>

        <!--modal更新设备-->
        <div class="modal fade" tabindex="-1" role="dialog" id="refreshDevice">
            <!--.modal:指定为模态框      fade:淡入淡出效果     tabindex="-1":不受tab键控制    role="dialog":指定模态框为对话框-->
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">&times;</button>
                        <h4 class="modal-title" style="font-weight: bold;">更新设备</h4>
                    </div>
                    <div class="modal-body" id="deviceInfoRefresh">
                        <table class="table table-striped table-hover">
                            <tbody>
                            <tr>
                                <td class="attName">设备名称:</td>
                                <td><input type="text" class="inputInfo" disabled="disabled" id="reName" ng-value="devInGroup.name"></td>
                            </tr>
                            <tr>
                                <td class="attName" >父类设备:</td>
                                <td>

                                    <select class="inputInfo" id="reParentId">
                                        <option>------请选择------</option>
                                        <option ng-repeat="data in deviceList" class="{{data.id}}">{{data.name}}</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td class="attName">厂商:</td>
                                <td>

                                    <select class="inputInfo" id="reManufacture" ng-change="getManufacture()" ng-model="myReManufacturer">
                                        <option>------请选择------</option>
                                        <option ng-repeat="data in manufacturerInfo" class="{{data.manufacturerId}}">{{data.manufacturerName}}</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td class="attName">设备类型:</td>
                                <td>

                                    <select class="inputInfo" id="reDeviceType" ng-change="getDeviceType()" ng-model="myReDeviceType">

                                        <option ng-repeat="data in deviceTypeInfo" class="{{data.deviceTypeId}}">{{data.deviceTypeName}}</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td class="attName">型号：</td>
                                <td>

                                    <select class="inputInfo" id="reModel"  ng-change="getDeviceModel()" ng-model="myReDeviceModel">

                                        <option ng-repeat="data in deviceModelInfo" class="{{data.modelId}}">{{data.modelName}}</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td class="attName">位置：</td>
                                <td><input type="text" class="inputInfo" id="reLocation"></td>
                            </tr>
                            <tr>
                                <td class="attName">状态：</td>
                                <td><input type="text" class="inputInfo" id="reStatus"></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal" id="modalCloseRefresh">关闭</button>
                        <button type="button" class="btn btn-primary" id="modalConfirmRefresh" data-dismiss="modal" ng-click="refreshDevice()">更新</button>
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->



        <!-- modal查看令牌 -->
        <div class="modal fade" tabindex="-1" role="dialog" id="token">
            <!--.modal:指定为模态框      fade:淡入淡出效果     tabindex="-1":不受tab键控制    role="dialog":指定模态框为对话框-->
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">&times;</button>
                        <h4 class="modal-title" style="font-weight: bold;">设备令牌</h4>
                    </div>
                    <div class="modal-body" id="tokenTable">
                        <p style="text-align: center;">{{token}}</p>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal" id="modalCloseToken">关闭</button>
                        <button type="button" class="btn btn-primary" id="modalConfirmToken" data-dismiss="modal">确定</button>
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->

    </div>
</div>